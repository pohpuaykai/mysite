{% csrf_token %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Circuit3D</title>
    <style>
      body { margin: 0; }
    </style>
    <script>
      //this is by ChatGPT, it hides all the console.warn from mathjax.js and three.js
    (function(){
      // preserve original
      if (!console.__originalWarn) console.__originalWarn = console.warn;

      console.warn = function(...args){
        try {
          // Build stack to find caller script
          const stack = (new Error()).stack || '';
          const lowered = stack.toLowerCase();

          // adjust these substrings to match how the MathJax files appear in your stack
          const mathjaxIndicators = ['/mathjax/tex-svg.js', '/mathjax/tex-chtml-full.js', 'tex-svg.js', 'tex-chtml-full.js', 'mathjax', 'three.module.js', 'three.core.js'];

          // If stack contains any of these, swallow the warning
          for (const s of mathjaxIndicators) {
            if (lowered.indexOf(s) !== -1) {
              return; // ignore MathJax-related warn
            }
          }
        } catch (e) {
          // ignore errors in our filter - fall back to printing
        }
        // otherwise call original
        console.__originalWarn.apply(console, args);
      };

      // optional: restore after a timeout (if you don't want permanent suppression)
      // setTimeout(()=>{ if (console.__originalWarn) console.warn = console.__originalWarn; }, 10000);

    })();
    </script>
    
  </head>
  <body>
    <!--silence console.warn for MathJax-->
    <script src="/public/static/mathjax/tex-svg.js"></script>
    <script>
      window.MathJaxSVG = window.MathJax;
      delete window.MathJax;
    </script>
    <script src="/public/static/mathjax/tex-chtml-full.js"></script>
    <script>
      window.MathJaxCHTML = window.MathJax;
      delete window.MathJax;
    </script>
    {% csrf_token %}
    <script>
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    </script>
    <script>
      const findEquations_url = "{% url 'findEquations' %}";
      const solveEquations_url = "{% url 'solveEquations' %}";
      const subtitlesTimingRecord_url = "{% url 'subtitlesTimingRecord' %}"
      const circuitAnimeRecord_url = "{% url 'circuitAnimeRecord' %}";
      const pollable_url = "{% url 'pollable' %}";
      //audio
      const basic_findEquations_audioFiles_url = "{% url 'basic_findEquations_audioFiles' %}";
      const basic_solvingSteps_audioFiles_url = "{% url 'basic_solvingSteps_audioFiles' %}";
      const wavFiles_url = "{% url 'wavFiles' %}";
      
    </script>
    <script type="module" src="/public/main.js"></script>
  </body>
</html>