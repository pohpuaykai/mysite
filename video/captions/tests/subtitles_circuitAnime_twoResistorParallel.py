import inspect
import pprint

import os
import django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'mysite.settings')
django.setup()

from video.captions.subtitles_circuitAnime_basic import SubtitlesCircuitAnimeBasic



pp = pprint.PrettyPrinter(indent=4)

###shared datum

from video import AUDIOFILES_DROP_FOLDER
folderpath = AUDIOFILES_DROP_FOLDER


def test_generateEachSubtitle_findEquation(verbose=False):
    details = {'circuitName': 'dcTwoResistorParallel', 'list_equationNetworkInfoDict': [{'equation': 'I_{R_{0}}=I_{DC_{8}}', 'equationFinderDisplayName': 'Kirchhoff Current Law', 'list_list_networkNodeIds': [[0, 8]], 'variableInfos': {'0': ['I_{R_{0}}'], '1': [], '2': [], '3': ['I_{R_{3}}'], '4': [], '5': [], '6': [], '7': [], '8': ['I_{DC_{8}}'], '9': [], '10': []}, 'variables': ['I_{DC_{8}}', 'I_{R_{0}}'], 'variableStr__nodeId': {'I_{R_{0}}': 0, 'I_{R_{3}}': 3, 'I_{DC_{8}}': 8}}, {'equation': 'I_{R_{0}}=I_{R_{3}}', 'equationFinderDisplayName': 'Kirchhoff Current Law', 'list_list_networkNodeIds': [[0, 3]], 'variableInfos': {'0': ['I_{R_{0}}'], '1': [], '2': [], '3': ['I_{R_{3}}'], '4': [], '5': [], '6': [], '7': [], '8': ['I_{DC_{8}}'], '9': [], '10': []}, 'variables': ['I_{R_{3}}', 'I_{R_{0}}'], 'variableStr__nodeId': {'I_{R_{0}}': 0, 'I_{R_{3}}': 3, 'I_{DC_{8}}': 8}}, {'equation': '-I_{DC_{8}}+I_{R_{0}}+I_{R_{3}}=0', 'equationFinderDisplayName': 'Kirchhoff Current Law', 'list_list_networkNodeIds': [[1, 8], [1, 0], [1, 3]], 'variableInfos': {'0': ['I_{R_{0}}'], '1': [], '2': [], '3': ['I_{R_{3}}'], '4': [], '5': [], '6': [], '7': [], '8': ['I_{DC_{8}}'], '9': [], '10': []}, 'variables': ['I_{R_{3}}', 'I_{R_{0}}', 'I_{DC_{8}}'], 'variableStr__nodeId': {'I_{R_{0}}': 0, 'I_{R_{3}}': 3, 'I_{DC_{8}}': 8}}, {'equation': '-V_{R_{0}}+V_{DC_{8}}=0', 'equationFinderDisplayName': 'Kirchhoff Voltage Law', 'list_list_networkNodeIds': [[0, 6, 5, 9, 8, 10, 1, 2, 0]], 'variableInfos': {'0': ['V_{R_{0}}'], '1': [], '2': [], '3': ['V_{R_{3}}'], '4': [], '5': [], '6': [], '7': [], '8': ['V_{DC_{8}}'], '9': [], '10': []}, 'variables': ['V_{DC_{8}}', 'V_{R_{0}}'], 'variableStr__nodeId': {'V_{R_{0}}': 0, 'V_{R_{3}}': 3, 'V_{DC_{8}}': 8}}, {'equation': 'V_{DC_{8}}-V_{R_{3}}=0', 'equationFinderDisplayName': 'Kirchhoff Voltage Law', 'list_list_networkNodeIds': [[5, 9, 8, 10, 1, 4, 3, 7, 5]], 'variableInfos': {'0': ['V_{R_{0}}'], '1': [], '2': [], '3': ['V_{R_{3}}'], '4': [], '5': [], '6': [], '7': [], '8': ['V_{DC_{8}}'], '9': [], '10': []}, 'variables': ['V_{R_{3}}', 'V_{DC_{8}}'], 'variableStr__nodeId': {'V_{R_{0}}': 0, 'V_{R_{3}}': 3, 'V_{DC_{8}}': 8}}, {'equation': '\\frac{V_{R_{0}}}{I_{R_{0}}}=R_{R_{0}}', 'equationFinderDisplayName': 'Ohm Law', 'list_list_networkNodeIds': [[0]], 'variableInfos': {'0': ['R_{R_{0}}', 'V_{R_{0}}', 'I_{R_{0}}'], '1': [], '2': [], '3': ['R_{R_{3}}', 'V_{R_{3}}', 'I_{R_{3}}'], '4': [], '5': [], '6': [], '7': [], '8': ['R_{DC_{8}}', 'V_{DC_{8}}', 'I_{DC_{8}}'], '9': [], '10': []}, 'variables': ['R_{R_{0}}', 'I_{R_{0}}', 'V_{R_{0}}'], 'variableStr__nodeId': {'R_{R_{0}}': 0, 'V_{R_{0}}': 0, 'I_{R_{0}}': 0, 'R_{R_{3}}': 3, 'V_{R_{3}}': 3, 'I_{R_{3}}': 3, 'R_{DC_{8}}': 8, 'V_{DC_{8}}': 8, 'I_{DC_{8}}': 8}}, {'equation': '\\frac{V_{R_{3}}}{I_{R_{3}}}=R_{R_{3}}', 'equationFinderDisplayName': 'Ohm Law', 'list_list_networkNodeIds': [[3]], 'variableInfos': {'0': ['R_{R_{0}}', 'V_{R_{0}}', 'I_{R_{0}}'], '1': [], '2': [], '3': ['R_{R_{3}}', 'V_{R_{3}}', 'I_{R_{3}}'], '4': [], '5': [], '6': [], '7': [], '8': ['R_{DC_{8}}', 'V_{DC_{8}}', 'I_{DC_{8}}'], '9': [], '10': []}, 'variables': ['R_{R_{3}}', 'I_{R_{3}}', 'V_{R_{3}}'], 'variableStr__nodeId': {'R_{R_{0}}': 0, 'V_{R_{0}}': 0, 'I_{R_{0}}': 0, 'R_{R_{3}}': 3, 'V_{R_{3}}': 3, 'I_{R_{3}}': 3, 'R_{DC_{8}}': 8, 'V_{DC_{8}}': 8, 'I_{DC_{8}}': 8}}, {'equation': '\\frac{V_{DC_{8}}}{I_{DC_{8}}}=R_{DC_{8}}', 'equationFinderDisplayName': 'Ohm Law', 'list_list_networkNodeIds': [[8]], 'variableInfos': {'0': ['R_{R_{0}}', 'V_{R_{0}}', 'I_{R_{0}}'], '1': [], '2': [], '3': ['R_{R_{3}}', 'V_{R_{3}}', 'I_{R_{3}}'], '4': [], '5': [], '6': [], '7': [], '8': ['R_{DC_{8}}', 'V_{DC_{8}}', 'I_{DC_{8}}'], '9': [], '10': []}, 'variables': ['R_{DC_{8}}', 'I_{DC_{8}}', 'V_{DC_{8}}'], 'variableStr__nodeId': {'R_{R_{0}}': 0, 'V_{R_{0}}': 0, 'I_{R_{0}}': 0, 'R_{R_{3}}': 3, 'V_{R_{3}}': 3, 'I_{R_{3}}': 3, 'R_{DC_{8}}': 8, 'V_{DC_{8}}': 8, 'I_{DC_{8}}': 8}}], 'textStr__textMeshUUID': {'I_{R_{0}}=I_{DC_{8}}': {'info': [{'variableStr': 'I_{R_{0}}', 'startPos': 0, 'endPos': 9, 'info': [['I', 'a4be4f6e-909d-4814-a833-ccee5ebae2d5'], ['R', '2e9f4cc1-57b1-44fe-a953-faca9fe2f77b'], ['0', '0fae75cf-c3a8-4eae-8ba8-c164ea478b3f']]}, {'variableStr': 'I_{DC_{8}}', 'startPos': 10, 'endPos': 20, 'info': [['I', '28e66428-0143-4c08-827f-1481769de332'], ['D', '2562f6c6-2728-45b9-873c-a91c28b294b1'], ['C', '6792a741-2efc-4364-83ba-874489e07f65'], ['8', 'a5316f81-c94b-44e5-8747-9ca0f0ae5e3d']]}], 'type': 'latex', 'meshUUID': '24d66221-a5f8-4247-af58-29311846897a'}, 'I_{R_{0}}=I_{R_{3}}': {'info': [{'variableStr': 'I_{R_{0}}', 'startPos': 0, 'endPos': 9, 'info': [['I', '01aeed71-2859-4fe8-bf38-3dc66836301a'], ['R', 'f89929e6-e7ea-4365-afe1-0a1b8333d9bf'], ['0', 'b1a02c8a-01b5-48fa-ba3b-71adc931acb2']]}, {'variableStr': 'I_{R_{3}}', 'startPos': 10, 'endPos': 19, 'info': [['I', '5ceb1103-3854-4cd6-afe6-12cd50c24033'], ['R', 'c3628943-e348-4060-80c8-b14362a96492'], ['3', '2c9e1568-390f-497b-b5cb-26c893a446f9']]}], 'type': 'latex', 'meshUUID': '926a2728-7d4e-45ca-9d12-f28d5e7a0968'}, '-I_{DC_{8}}+I_{R_{0}}+I_{R_{3}}=0': {'info': [{'variableStr': 'I_{DC_{8}}', 'startPos': 1, 'endPos': 11, 'info': [['I', 'd29bb2ec-3fa2-40a7-981c-1667f2825fb9'], ['D', '4bacdc2d-82ce-409c-9a72-1ebcceb7cec7'], ['C', '12e002f6-2d10-4018-ace7-c6583f5ea45f'], ['8', '1c9aacf0-5304-4200-a9ff-3a24c9099cc0']]}, {'variableStr': 'I_{R_{0}}', 'startPos': 12, 'endPos': 21, 'info': [['I', '077f2224-c735-41a0-8691-dd4748ce6ac3'], ['R', '5406ecf4-d50f-4a4f-8a46-05be605015c1'], ['0', 'fc1506dd-38d2-4c4b-bacc-2febf36adada']]}, {'variableStr': 'I_{R_{3}}', 'startPos': 22, 'endPos': 31, 'info': [['I', '8772c81e-74bb-4cf6-a75b-fd7c76b74e31'], ['R', 'cf817dad-e964-490f-a46d-64309ec1dff0'], ['3', '603d4f0a-5623-4a99-b689-fb08eb2624e7']]}], 'type': 'latex', 'meshUUID': '254e3349-cd16-4229-a073-aff08539601b'}, '-V_{R_{0}}+V_{DC_{8}}=0': {'info': [{'variableStr': 'V_{R_{0}}', 'startPos': 1, 'endPos': 10, 'info': [['V', 'bf56f155-084b-49bd-847a-aeca668b8ec4'], ['R', '921345bb-d320-4b20-9efa-4e94121c21bd'], ['0', 'd162fc35-98fe-491d-b26e-1671898149a8']]}, {'variableStr': 'V_{DC_{8}}', 'startPos': 11, 'endPos': 21, 'info': [['V', '73eaba32-1851-4282-94dc-679a5c344b36'], ['D', '27454986-5d09-459f-988e-f51524e49298'], ['C', 'a1fb90ba-698a-4a34-990f-fc42b83fadaa'], ['8', '69990af0-37a1-470e-bddc-3ca12d8a32b8']]}], 'type': 'latex', 'meshUUID': '31156500-a768-4dfa-af65-472d93f8af9d'}, 'V_{DC_{8}}-V_{R_{3}}=0': {'info': [{'variableStr': 'V_{DC_{8}}', 'startPos': 0, 'endPos': 10, 'info': [['V', '45af119f-fa24-4b4f-a6d8-63e39f662bfc'], ['D', '6983fee0-1928-433a-acbf-546cf9fcad2a'], ['C', 'dcbaa66f-07fc-44ec-81c1-3b22884b920a'], ['8', '4675e161-43f4-4d83-b4f2-b898d1ef59f2']]}, {'variableStr': 'V_{R_{3}}', 'startPos': 11, 'endPos': 20, 'info': [['V', '983e4e47-e0e0-4bc6-931b-1508ea3e4cbb'], ['R', '5a56b6b5-bef0-4ee4-87b2-ba3513b98f5b'], ['3', 'a473a1f2-b0d6-42d7-8629-a1c653fb4fbb']]}], 'type': 'latex', 'meshUUID': '4ba0b466-e49b-4cc4-bdea-74fd6e07408e'}, '\\frac{V_{R_{0}}}{I_{R_{0}}}=R_{R_{0}}': {'info': [{'variableStr': 'V_{R_{0}}', 'startPos': 6, 'endPos': 15, 'info': [['V', '891f9571-b03a-4531-bcb7-77be3ee56110'], ['R', '3e03bf2e-d1f8-4e38-8426-ac7456298ae7'], ['0', '83183dbe-444d-470d-8bc4-6bf5a32244aa']]}, {'variableStr': 'I_{R_{0}}', 'startPos': 17, 'endPos': 26, 'info': [['I', '95ab1b2b-092a-403e-a779-afc1902494b7'], ['R', '9ee50dcc-711e-49ae-ad9f-56d5ff1a9704'], ['0', '6c73833e-e89e-4e8c-9308-4bd880b0d514']]}, {'variableStr': 'R_{R_{0}}', 'startPos': 28, 'endPos': 37, 'info': [['R', 'db203788-deb0-4dc0-b09c-2c50d826d7fc'], ['R', '8322a6df-674e-4400-a761-db6bb577a0b0'], ['0', '40451616-26a8-40e2-a573-8a46825237e5']]}], 'type': 'latex', 'meshUUID': '24f9d5c3-d10b-4a4d-a097-ad1e3f980f4c'}, '\\frac{V_{R_{3}}}{I_{R_{3}}}=R_{R_{3}}': {'info': [{'variableStr': 'V_{R_{3}}', 'startPos': 6, 'endPos': 15, 'info': [['V', 'db51152c-cf94-4e3a-af43-bdcee4172106'], ['R', '4b81a5c5-d567-407f-a21c-358b210affe5'], ['3', '593ff874-026c-4c6a-8b3c-b51ba9bd31a4']]}, {'variableStr': 'I_{R_{3}}', 'startPos': 17, 'endPos': 26, 'info': [['I', 'd8bbbd68-bde1-40ba-86b6-aa917d553195'], ['R', 'f515dc88-369d-4cbb-bd49-6badb19127cf'], ['3', 'bc439452-9482-4b1f-bcf8-c61336b20517']]}, {'variableStr': 'R_{R_{3}}', 'startPos': 28, 'endPos': 37, 'info': [['R', '4bd1f0ef-d8c9-4106-9c66-92c799b6128c'], ['R', 'cf5ac37c-5d21-4d60-b606-3367c56bd6e4'], ['3', 'c2da5e39-14be-466f-a298-344740584f08']]}], 'type': 'latex', 'meshUUID': 'a63cd6a5-b737-4814-9886-26fdd9bab585'}, '\\frac{V_{DC_{8}}}{I_{DC_{8}}}=R_{DC_{8}}': {'info': [{'variableStr': 'V_{DC_{8}}', 'startPos': 6, 'endPos': 16, 'info': [['V', 'e34b2766-2a4b-4808-a5e7-f59daa298c40'], ['D', 'b3f81c73-bdf1-42fb-8cde-06ce26dcb526'], ['C', '446c96d9-2935-4625-b89d-d800c725f7c1'], ['8', '62f77622-5532-433f-9ea0-fe72542a8967']]}, {'variableStr': 'I_{DC_{8}}', 'startPos': 18, 'endPos': 28, 'info': [['I', '662cf27c-653e-403d-b9a4-c11de724cf53'], ['D', '4a239a67-f092-4078-9322-de363e3a6d51'], ['C', 'f03f04c7-fd32-41c2-b84e-587974f9e901'], ['8', 'ce4fb4cc-d5e7-4638-b3e6-b8cdcf16409d']]}, {'variableStr': 'R_{DC_{8}}', 'startPos': 30, 'endPos': 40, 'info': [['R', '0ddfb1e4-e004-4b7f-a893-df2fcd63c0b6'], ['D', '733a2619-3fcb-46fb-9e6f-870d9ecb2939'], ['C', 'b9186419-5c8a-49dd-96bd-f74fe72e31e6'], ['8', '5782bec6-8014-400a-992f-d00056b1d8a1']]}], 'type': 'latex', 'meshUUID': '0eff1944-f952-479f-9fed-1b34ba0bad76'}}, 'id__type': {'0': 'resistor', '1': 'wire', '2': 'wire', '3': 'resistor', '4': 'wire', '5': 'wire', '6': 'wire', '7': 'wire', '8': 'battery', '9': 'wire', '10': 'wire'}, 'language': 'en-US', 'introduction_findEquations': 'This is a circuit with two resistors connected in parallel, lets find all the equations related to the components of this circuit', 'conclusion_findEquations': 'We have found all the equations relating to the two resistors and their parallel connectivity.'}
    scab = SubtitlesCircuitAnimeBasic()
    # languageTwoLetterCode = 'en-US'
    # languages__subtitles, languages__subtitleIdx__dict_startTime_endTime, languages__filepath, language__pauseIdx__dict_startTime_endTime_listOfWordLocationLengthElapsedTime = 
    

    ticketNumber = scab.generateEachAudioFilePath_findEquation(
        details['circuitName'],
        details['list_equationNetworkInfoDict'], 
        details['textStr__textMeshUUID'], 
        details['id__type'], 
        details['language'],
        details['introduction_findEquations'], #>>>>>>>
        details['conclusion_findEquations'], #
        folderpath)
    response = scab.waitUntilResponseAvailable(ticketNumber)
    if verbose:
        print('***********************')
        # pp.pprint(results)
        # pp.pprint(languages__subtitles)
        # pp.pprint(languages__subtitleIdx__dict_startTime_endTime)
        # pp.pprint(languages__filepath)
        # pp.pprint(language__pauseIdx__dict_startTime_endTime_listOfWordLocationLengthElapsedTime)
        print(ticketNumber)
        # pp.pprint(response)
        import json
        print(json.dumps(response))


if __name__=='__main__':

    test_generateEachSubtitle_findEquation(True)